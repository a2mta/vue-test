(()=>{var e={934:(e,r,t)=>{t(128),t(444),t(11),t(226),t(139),t(275),t(270),t(507),t(117),t(257);var s=["_id","providers"];function n(e,r){if(null==e)return{};var t,s,n=function(e,r){if(null==e)return{};var t,s,n={},o=Object.keys(e);for(s=0;s<o.length;s++)t=o[s],r.indexOf(t)>=0||(n[t]=e[t]);return n}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)t=o[s],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function o(e,r,t,s,n,o,i){try{var u=e[o](i),a=u.value}catch(e){return void t(e)}u.done?r(a):Promise.resolve(a).then(s,n)}function i(e){return function(){var r=this,t=arguments;return new Promise((function(s,n){var i=e.apply(r,t);function u(e){o(i,s,n,u,a,"next",e)}function a(e){o(i,s,n,u,a,"throw",e)}u(void 0)}))}}function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,s)}return t}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach((function(r){c(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function c(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}t(301),t(706),t(0),t(133),t(304),t(285),t(843);var p=t(860).Router(),d=t(489),l=t(953),m=t(47),v=t(553),f=v.checkSchema,x=v.validationResult,y={name:{isString:!0,exists:!0,not:{isEmpty:!0}},phone:{exists:!0,isMobilePhone:!0},email:{exists:!0,isEmail:!0},providers:{exists:!0,isArray:!0}},j=a(a({},y),{},{_id:{isString:!0,exists:!0,not:{isEmpty:!0}}});p.get("/",function(){var e=i(regeneratorRuntime.mark((function e(r,t){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.find().populate("providers");case 3:s=e.sent,t.status(200).send(s),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.status(400).send(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r,t){return e.apply(this,arguments)}}()),p.get("/:id",function(){var e=i(regeneratorRuntime.mark((function e(r,t){var s,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.params,e.prev=1,e.next=4,d.findById(s.id);case 4:n=e.sent,t.status(200).send(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.status(400).send(err);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(r,t){return e.apply(this,arguments)}}()),p.post("/create",f(y),function(){var e=i(regeneratorRuntime.mark((function e(r,t){var s,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.body,e.prev=1,e.next=4,d.create(s);case 4:if(n=e.sent,!s.providers){e.next=8;break}return e.next=8,l.updateMany({_id:s.providers},{$addToSet:{clients:n._id}});case 8:t.status(200).send(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.status(400).send(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(r,t){return e.apply(this,arguments)}}()),p.delete("/delete/:id",function(){var e=i(regeneratorRuntime.mark((function e(r,t){var s,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.params,n=s.id,e.prev=2,e.next=5,d.findByIdAndDelete({_id:n});case 5:return o=e.sent,e.next=8,l.updateMany({_id:o.providers},{$pull:{clients:n}});case 8:t.status(200).send(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),t.status(400).send(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(r,t){return e.apply(this,arguments)}}()),p.put("/update",f(j),function(){var e=i(regeneratorRuntime.mark((function e(r,t){var o,i,u,c,p,v,f,y,j;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=x(r)).isEmpty()){e.next=3;break}return e.abrupt("return",t.status(400).json({errors:o.array()}));case 3:return i=r.body,u=i._id,c=i.providers,p=n(i,s),e.next=6,d.findByIdAndUpdate(u,a({providers:c},p));case 6:return v=e.sent,f=v.providers.map((function(e){return e.toString()})),y=m(f,c),j=m(c,f),e.next=12,l.updateMany({_id:j},{$addToSet:{clients:v._id}});case 12:return e.next=14,l.updateMany({_id:y},{$pull:{clients:v._id}});case 14:t.status(200).send();case 15:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()),e.exports=p},489:(e,r,t)=>{var s=t(185),n=s.model,o=s.Schema,i=new o({name:{type:String,required:!0},email:{type:String,required:!0,unique:!0},phone:{type:String,required:!0,unique:!0},providers:[{type:o.Types.ObjectId,ref:"Provider"}]});e.exports=n("Client",i,"clients")},648:(e,r,t)=>{function s(e,r,t,s,n,o,i){try{var u=e[o](i),a=u.value}catch(e){return void t(e)}u.done?r(a):Promise.resolve(a).then(s,n)}function n(e){return function(){var r=this,t=arguments;return new Promise((function(n,o){var i=e.apply(r,t);function u(e){s(i,n,o,u,a,"next",e)}function a(e){s(i,n,o,u,a,"throw",e)}u(void 0)}))}}t(301),t(706),t(0),t(941),t(117);var o=t(860).Router(),i=t(953),u=t(553),a=u.checkSchema,c=u.validationResult;o.get("/",function(){var e=n(regeneratorRuntime.mark((function e(r,t){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.find().populate("clients");case 3:s=e.sent,t.status(200).send(s),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.status(400).send(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r,t){return e.apply(this,arguments)}}()),o.post("/create",function(){var e=n(regeneratorRuntime.mark((function e(r,t){var s,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.body,n=new i(s),e.prev=2,e.next=5,n.save();case 5:t.status(200).send(n),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),o=e.t0.message,t.status(400).send(o);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(r,t){return e.apply(this,arguments)}}()),o.delete("/delete/:id",function(){var e=n(regeneratorRuntime.mark((function e(r,t){var s,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.params,n=s.id,e.prev=2,e.next=5,i.findOne({_id:n});case 5:return o=e.sent,e.next=8,o.deleteOne();case 8:t.status(200).send(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),t.status(400).send(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(r,t){return e.apply(this,arguments)}}()),o.put("/update",a({_id:{isString:!0,exists:!0,not:{isEmpty:!0}},name:{isString:!0,exists:!0,not:{isEmpty:!0}}}),(function(e,r){var t=c(e);if(!t.isEmpty())return r.status(400).json({errors:t.array()});var s=e.body,n=s._id,o=s.name;i.findByIdAndUpdate(n,{name:o},(function(e,t){e&&r.status(400).send(e),r.status(200).send(t)}))})),e.exports=o},953:(e,r,t)=>{var s=t(185),n=s.model,o=s.Schema,i=(s.Types,new o({name:{type:String,required:!0,unique:!0},clients:[{type:o.Types.ObjectId,ref:"Client"}]}));i.pre("deleteOne",{document:!0},(function(e){this.model("Client").updateMany({_id:this.clients},{$pull:{providers:this._id}},e)})),e.exports=n("Provider",i,"providers")},46:(e,r,t)=>{var s=t(1),n=t(977),o=t(510),i=t(17),u=t(857),a=t(796),c=t(123).VueLoaderPlugin;e.exports=[{name:"server",entry:i.resolve(__dirname,"src","server.js"),mode:"production",target:"node",externalsPresets:{node:!0},externals:[n()],output:{path:i.resolve(__dirname,"dist"),filename:"server.js"},module:{rules:[{test:/\.js$/,exclude:/node_modules/,use:{loader:"babel-loader"}}]},plugins:[new s({patterns:[{from:i.resolve(__dirname,"src/docs"),to:i.resolve(__dirname,"dist/docs")}]})],resolve:{extensions:[".js"]}},{name:"client",entry:{main:[i.resolve(__dirname,"src","main.js")]},output:{path:i.resolve(__dirname,"dist")},mode:"development",module:{rules:[{test:/\.s?css$/,use:["style-loader",{loader:u.loader,options:{esModule:!1}},"css-loader",{loader:"postcss-loader",options:{postcssOptions:{plugins:[a()]}}},"sass-loader"]},{test:/\.js$/,exclude:/node_modules/,use:{loader:"babel-loader",options:{plugins:[["import",{libraryName:"ant-design-vue",libraryDirectory:"es",style:"css"}]]}}},{test:/\.vue$/,loader:"vue-loader"}]},plugins:[new c,new u({filename:"[name].[contenthash:8].css",chunkFilename:"[name].[contenthash:8].css"}),new o({template:i.resolve(__dirname,"public","index.html")})],resolve:{alias:{vue$:"vue/dist/vue.runtime.esm-bundler.js"},extensions:["*",".js",".vue",".json"]}}]},796:e=>{"use strict";e.exports=require("autoprefixer")},1:e=>{"use strict";e.exports=require("copy-webpack-plugin")},11:e=>{"use strict";e.exports=require("core-js/modules/es.array.filter.js")},706:e=>{"use strict";e.exports=require("core-js/modules/es.array.find.js")},139:e=>{"use strict";e.exports=require("core-js/modules/es.array.for-each.js")},257:e=>{"use strict";e.exports=require("core-js/modules/es.array.index-of.js")},133:e=>{"use strict";e.exports=require("core-js/modules/es.array.map.js")},304:e=>{"use strict";e.exports=require("core-js/modules/es.date.to-string.js")},941:e=>{"use strict";e.exports=require("core-js/modules/es.function.name.js")},507:e=>{"use strict";e.exports=require("core-js/modules/es.object.define-properties.js")},843:e=>{"use strict";e.exports=require("core-js/modules/es.object.define-property.js")},226:e=>{"use strict";e.exports=require("core-js/modules/es.object.get-own-property-descriptor.js")},270:e=>{"use strict";e.exports=require("core-js/modules/es.object.get-own-property-descriptors.js")},128:e=>{"use strict";e.exports=require("core-js/modules/es.object.keys.js")},0:e=>{"use strict";e.exports=require("core-js/modules/es.object.to-string.js")},117:e=>{"use strict";e.exports=require("core-js/modules/es.promise.js")},285:e=>{"use strict";e.exports=require("core-js/modules/es.regexp.to-string.js")},444:e=>{"use strict";e.exports=require("core-js/modules/es.symbol.js")},275:e=>{"use strict";e.exports=require("core-js/modules/web.dom-collections.for-each.js")},860:e=>{"use strict";e.exports=require("express")},553:e=>{"use strict";e.exports=require("express-validator")},510:e=>{"use strict";e.exports=require("html-webpack-plugin")},848:e=>{"use strict";e.exports=require("json-refs")},47:e=>{"use strict";e.exports=require("lodash/difference")},857:e=>{"use strict";e.exports=require("mini-css-extract-plugin")},185:e=>{"use strict";e.exports=require("mongoose")},301:e=>{"use strict";e.exports=require("regenerator-runtime/runtime.js")},948:e=>{"use strict";e.exports=require("swagger-ui-express")},123:e=>{"use strict";e.exports=require("vue-loader")},354:e=>{"use strict";e.exports=require("webpack")},714:e=>{"use strict";e.exports=require("webpack-dev-middleware")},113:e=>{"use strict";e.exports=require("webpack-hot-middleware")},977:e=>{"use strict";e.exports=require("webpack-node-externals")},477:e=>{"use strict";e.exports=require("yamljs")},17:e=>{"use strict";e.exports=require("path")}},r={};function t(s){var n=r[s];if(void 0!==n)return n.exports;var o=r[s]={exports:{}};return e[s](o,o.exports,t),o.exports}(()=>{t(11),t(0),t(941);var e,r=t(860),s=t(948),n=t(185),o=t(17),i=(t(354),t(714),t(113),t(46)),u=t(477),a=t(848).resolveRefs,c=t(934),p=t(648),d=(i.filter((function(e){return"client"===e.name}))[0],r());(e=u.load(o.resolve(__dirname,"./docs/v1.yaml")),a(e,{filter:["relative","remote"],loaderOptions:{processContent:function(e,r){r(null,u.parse(e.text))}}}).then((function(e){return e.resolved}),(function(e){console.log(e.stack)}))).then((function(e){return d.use("/api/doc",s.serve,s.setup(e))})),n.connect("mongodb://localhost:27017/vue-test"),d.use(r.static("dist")),d.use(r.json()),d.use("/api/clients",c),d.use("/api/providers",p),d.listen(8080,(function(){console.log("App is running...")}))})()})();